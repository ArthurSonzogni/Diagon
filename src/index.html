<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>ANTLR cmake emscripten starter</title>
    <link rel="stylesheet" type="text/css" href="style.css">
  </head>
  <body>

    <div id="code_area">
      <div class="container vertical fill_space">

        <!--1 Menu bar-->
        <div>
          <label for="translator">Translator</label>
          <select list="translator_list" type="text" id="translator">
            <option value="Sequence">Sequence diagram.</option>
            <option value="Example">Example.</option>
            <option value="LineNumber">Numbered lines with box.</option>
          </select>
        </div>

        <div class="gutter"></div>

        <!--2 Input / Output -->
        <div class="container horizontal" id="inputoutput">
          <textarea id="input" placeholder='input, for instance  (1+2)*(3-4)/5'></textarea>
          <div class="gutter"></div>
          <textarea id="output" placeholder='output' readonly></textarea>
        </div>

        <div class="gutter"></div>

        <!--3 Errors-->
        <textarea id="errors" placeholder='errors' readonly rows=4 ></textarea>

      </div>
    </div>


    Some content below.

  </body>

<script>

let translator = document.getElementById('translator');
let input = document.getElementById('input');
let output = document.getElementById('output');
let errors = document.getElementById('errors');
errors.value = '';

function print(text) {
  if (arguments.length > 1)
    text = Array.prototype.slice.call(arguments).join(' ');
  errors.value += text + '\n';
  //console.log(text);
};

window.Module = {
  preRun: [],
  postRun: [],
  print: print,
  printErr: print,
  canvas: undefined,
};

</script>
<script src="main.js"></script>

<script>
let translate = Module.cwrap('translate', 'void', ['string','string']);
let OnChange = function() {
  errors.value = '';
  let translator = document.getElementById("translator").value;
  console.log(translator, input.value);
  translate(translator, input.value);
}
input.addEventListener('input', OnChange);
translator.addEventListener('change', OnChange);
</script>

</html>

